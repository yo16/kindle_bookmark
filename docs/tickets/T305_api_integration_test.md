# T305: API統合テスト

## 📋 基本情報
- **チケットID**: T305
- **タイトル**: API統合テスト
- **優先度**: Medium
- **見積もり**: 0.5日（4時間）
- **担当**: Backend
- **ステータス**: TODO

## 🎯 概要
実装された全APIエンドポイントの統合テストを作成し、API間の連携とデータ整合性を検証する。

## 📝 詳細説明
### テスト対象API
1. **GET /api/books** (T301)
2. **POST /api/sync** (T302)
3. **GET /api/collections** (T303)
4. **POST /api/books/{asin}/open** (T304)

### テストシナリオ
```typescript
// tests/integration/api.test.ts
1. 同期処理→書籍一覧取得→データ整合性確認
2. コレクション一覧→書籍フィルタリング→結果整合性
3. 書籍開く→レスポンス検証→エラーケース
4. エラーハンドリング→適切なエラーレスポンス
```

## ✅ 完了条件
- [ ] 全APIエンドポイントのテスト作成
- [ ] 正常系・異常系テストケース
- [ ] データ整合性検証
- [ ] パフォーマンステスト
- [ ] エラーレスポンス検証

## 🔗 依存関係
- **前提条件**: T301-T304（全APIエンドポイント）
- **後続タスク**: 品質保証・デプロイ準備

## 🧪 検証方法
```bash
cd src/server
npm test -- api.integration.test.ts
npm run test:coverage
```